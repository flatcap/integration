From e53eae78442872b2dc1601f39418f3685adcf173 Mon Sep 17 00:00:00 2001
From: Richard Russon <rich@flatcap.org>
Date: Thu, 9 Jun 2016 12:06:10 -0700
Subject: [PATCH 44/45] Fix alignment in the compose menu.

Several of the compose-panel labels didn't use the TITLE_FMT to align
themselves.  This causes formatting problems when the width is changed,
e.g. by the NNTP patch.
---
 compose.c | 16 ++++------------
 1 file changed, 4 insertions(+), 12 deletions(-)

diff --git a/compose.c b/compose.c
index d12a64c..286d094 100644
--- a/compose.c
+++ b/compose.c
@@ -147,7 +147,7 @@ static void snd_entry (char *b, size_t blen, MUTTMENU *menu, int num)
 
 static void redraw_crypt_lines (HEADER *msg)
 {
-  mutt_window_mvaddstr (MuttIndexWindow, HDR_CRYPT, 0, "Security: ");
+  mutt_window_mvprintw (MuttIndexWindow, HDR_CRYPT, 0, TITLE_FMT, "Security: ");
 
   if ((WithCrypto & (APPLICATION_PGP | APPLICATION_SMIME)) == 0)
   {
@@ -187,19 +187,11 @@ static void redraw_crypt_lines (HEADER *msg)
 
   if ((WithCrypto & APPLICATION_PGP)
       && (msg->security & APPLICATION_PGP) && (msg->security & SIGN))
-  {
-    char *s = _(" sign as: ");
-    int offset = HDR_XOFFSET + SidebarWidth - mbstowcs (NULL, s, 0);
-    mvprintw (HDR_CRYPTINFO, offset < 0 ? 0 : offset, "%s%s", s,
-	      PgpSignAs ? PgpSignAs : _("<default>"));
-  }
+    printw (TITLE_FMT "%s", _("sign as: "), PgpSignAs ? PgpSignAs : _("<default>"));
 
   if ((WithCrypto & APPLICATION_SMIME)
       && (msg->security & APPLICATION_SMIME) && (msg->security & SIGN)) {
-    char *s = _(" sign as: ");
-    int offset = HDR_XOFFSET + SidebarWidth - mbstowcs (NULL, s, 0);
-    mvprintw (HDR_CRYPTINFO, offset < 0 ? 0 : offset, "%s%s", s,
-	      SmimeDefaultKey ? SmimeDefaultKey : _("<default>"));
+      printw (TITLE_FMT "%s", _("sign as: "), SmimeDefaultKey ? SmimeDefaultKey : _("<default>"));
   }
 
   if ((WithCrypto & APPLICATION_SMIME)
@@ -221,7 +213,7 @@ static void redraw_mix_line (LIST *chain)
   char *t;
 
   /* L10N: "Mix" refers to the MixMaster chain for anonymous email */
-  mutt_window_mvaddstr (MuttIndexWindow, HDR_MIX, 0,     "     Mix: ");
+  mutt_window_mvprintw (MuttIndexWindow, HDR_MIX, 0, TITLE_FMT, _("Mix: "));
 
   if (!chain)
   {
-- 
2.8.2

